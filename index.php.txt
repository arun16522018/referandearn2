<?php
require _DIR_.'/vendor/autoload.php';
require _DIR_.'/src/BotCore.php';

use ReferandEarn\BotCore;

// Initialize bot
$bot = new BotCore([
    'token' => getenv('TELEGRAM_BOT_TOKEN'),
    'webhook_url' => getenv('WEBHOOK_URL'),
    'users_file' => _DIR_.'/data/users.json',
    'error_log' => _DIR_.'/logs/error.log'
]);

// Handle webhook or CLI
if (php_sapi_name() === 'cli') {
    $bot->handleCommand($argv[1] ?? null);
} else {
    $bot->handleWebhook();
}
